
<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <?!= include("page-style"); ?>
    <link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css">
    <meta charset="utf-8">
    <title>Skyometer</title>
    <script>
  </script>
  </head>
    <body>

    <br><br><br>

    <div id="allSearch" class="All">
      <input class="inputStyle" id="thingSearch" type="text" placeholder="ultimate frisbee">
      <button class="postButtonStyle" id="searchButton">Search</button>

    </div>

    <div id="allPosts" class="All">

    </div>

    <div id="singlePostViewAll" class="All">

    </div>

    <div id="allSettings" class="allSettingsView">
        <h1 class="darkModeLabel">Dark Mode</h1>
        <div class="theme-switch-wrapper">
          <label class="theme-switch" for="checkbox">
            <input type="checkbox" id="checkbox" />
            <div class="slider round"></div>
    	  </label>
        </div>
    </div>

    <div id="newPost" class="newPosts">
      <h1 class="inputTitleStyle">Thing</h1>
      <input class="inputStyle" id="thingText" type="text" placeholder="ultimate frisbee">
      <h1 class="inputTitleStyle">Name</h1>
      <input class="inputStyle" id="nameText" type="text" placeholder="Mr. cephalopod">
      <h1 class="inputTitleStyle">Skys</h1>
      <input class="inputStyle" id="skysText" type="text" placeholder="100,000">
      <button class="postButtonStyle" id="postButton">Post</button>
    </div>

    <div class="titleBar">
         <ul>
            <li><img id="LogoDarkid" class="LogoDark"src="https://docs.google.com/drawings/d/e/2PACX-1vRw3KAkHxqqrKe3IrGjI9LKNfaJjJmyJtAI94tGdOTNgOZKuY6KdS19UPzAizJs1GdYp1kQl_3z4rfs/pub?w=327&h=100" alt="Highlight"></li>
            <li><img id="LogoLightid" src="https://docs.google.com/drawings/d/e/2PACX-1vSkIHgj8aRk56Sf75CX7iiAel4Rw9c3g9nTSQ5J7B17EOEL63SeAERpSgVoSmBrwD4rW2pNgTam8hz7/pub?w=327&h=100" alt="Highlight"></li>
	    <li><button alt="Home" id="Home" class="titleButtons" ><i class="fas fa-home"></i></button></li>
            <li><button alt="Settings" id="Settings" class="titleButtons" ><i class="fas fa-cog"></i></button></li>
            <li><button alt="Post" id="Post" class="titleButtons" ><i class="fas fa-plus-circle"></i></button></li>
            <li><button alt="Search" id="Search" class="titleButtons" ><i class="fas fa-search"></i></button></li>
         </ul>
    </div>
    <div class="titleBarEnd">
    </div>

    <script>
      document.getElementById("Home").addEventListener("click",goHome);
      document.getElementById("Settings").addEventListener("click",goSetings);
      document.getElementById("Post").addEventListener("click",goPost);
      document.getElementById("Search").addEventListener("click",goSearch);
      document.getElementById("searchButton").addEventListener("click",Search);
      function goHome(){
        document.getElementById("allPosts").style.display = "block";
        document.getElementById("allSettings").style.display = "none";
        document.getElementById("newPost").style.display = "none";
        document.getElementById("allSearch").style.display = "none";
      }
      function goSetings(){
        document.getElementById("allSettings").style.display = "block";
        document.getElementById("allPosts").style.display = "none";
        document.getElementById("newPost").style.display = "none";
	document.getElementById("allSearch").style.display = "none";
      }
      function goPost(){
        document.getElementById("newPost").style.display = "block";
        document.getElementById("allPosts").style.display = "none";
        document.getElementById("allSettings").style.display = "none";
        document.getElementById("allSearch").style.display = "none";
      }
      function goSearch(){
        document.getElementById("newPost").style.display = "none";
        document.getElementById("allPosts").style.display = "none";
        document.getElementById("allSettings").style.display = "none";
        document.getElementById("allSearch").style.display = "block";

      }

      function Search(){

        var SearchedThing = document.getElementById("thingSearch").value;

        <? for (var i = 0; i < Data.length; i++) { ?>

           var searchItems = <?= Data[i][0];?>;

            substring = SearchedThing;

            if(searchItems.toLowerCase().includes(substring) === true && SearchedThing != "") {

              var singlePost = document.createElement("button");
              singlePost.setAttribute('class', 'Cell');

              var h1Thing = document.createElement("h1");
              h1Thing.setAttribute('class', 'h1ThingClass');

              var h2Name = document.createElement("h1");
              h2Name.setAttribute('class', 'h2NameClass');

              var h3Skys = document.createElement("h1");
              h3Skys.setAttribute('class', 'h3SkysClass');

              var nodeThing = document.createTextNode(<?= Data[i][0];?>);
              var nodeName = document.createTextNode("By " + <?= Data[i][1];?>);
              var nodeSkys = document.createTextNode("Score: " + <?= Data[i][2];?>);

              var elementAllPosts = document.getElementById("allSearch");

              h1Thing.appendChild(nodeThing);
              h2Name.appendChild(nodeName);
              h3Skys.appendChild(nodeSkys);

              singlePost.appendChild(h1Thing);
              singlePost.appendChild(h2Name);
              singlePost.appendChild(h3Skys);

              elementAllPosts.appendChild(singlePost);

            }

          <? } ?>

      }

        document.getElementById("postButton").addEventListener("click",postFunc);

        function postFunc(){
        var thingTextVar = document.getElementById("thingText").value
        var nameTextVar = document.getElementById("nameText").value
        var skysTextVar = document.getElementById("skysText").value
        google.script.run.post(thingTextVar, nameTextVar, skysTextVar);
        document.getElementById("allPosts").style.display = "block";
        document.getElementById("newPost").style.display = "none";
      }

    <? for (var i = 0; i < Data.length; i++) { ?>

      var singlePost = document.createElement("button");
      singlePost.setAttribute('class', 'Cell');

      var h1Thing = document.createElement("h1");
      h1Thing.setAttribute('class', 'h1ThingClass');

      var h2Name = document.createElement("h1");
      h2Name.setAttribute('class', 'h2NameClass');

      var h3Skys = document.createElement("h1");
      h3Skys.setAttribute('class', 'h3SkysClass');

      var nodeThing = document.createTextNode(<?= Data[i][0];?>);
      var nodeName = document.createTextNode("By " + <?= Data[i][1];?>);
      var nodeSkys = document.createTextNode("Score: " + <?= Data[i][2];?>);

      var elementAllPosts = document.getElementById("allPosts");

      h1Thing.appendChild(nodeThing);
      h2Name.appendChild(nodeName);
      h3Skys.appendChild(nodeSkys);

      singlePost.appendChild(h1Thing);
      singlePost.appendChild(h2Name);
      singlePost.appendChild(h3Skys);

      elementAllPosts.appendChild(singlePost);

    <? } ?>

const toggleSwitch = document.querySelector('.theme-switch input[type="checkbox"]');
const currentTheme = localStorage.getItem('theme');

if (currentTheme) {
    document.documentElement.setAttribute('data-theme', currentTheme);

    if (currentTheme === 'dark') {
        toggleSwitch.checked = true;
        document.getElementById("LogoDarkid").style.display = "block";
        document.getElementById("LogoLightid").style.display = "none";
    }
}

function switchTheme(e) {
    if (e.target.checked) {
        document.documentElement.setAttribute('data-theme', 'dark');
        localStorage.setItem('theme', 'dark');
        document.getElementById("LogoDarkid").style.display = "block";
        document.getElementById("LogoLightid").style.display = "none";

    }
    else {        document.documentElement.setAttribute('data-theme', 'light');
          localStorage.setItem('theme', 'light');
          document.getElementById("LogoDarkid").style.display = "none";
          document.getElementById("LogoLightid").style.display = "block";
    }
}

toggleSwitch.addEventListener('change', switchTheme, false);

    </script>
  </body>
</html>
